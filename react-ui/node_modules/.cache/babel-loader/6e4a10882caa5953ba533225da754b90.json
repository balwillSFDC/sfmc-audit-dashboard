{"ast":null,"code":"/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\nimport escapeRegExp from 'lodash.escaperegexp';\n/**\n * SLDS recommends auto-complete/search inputs menus have a limit of 10 items.\n */\n\nvar filter = function filter(_ref) {\n  var inputValue = _ref.inputValue,\n      _ref$limit = _ref.limit,\n      limit = _ref$limit === void 0 ? 10 : _ref$limit,\n      options = _ref.options,\n      selection = _ref.selection;\n  var inputValueRegExp = new RegExp(escapeRegExp(inputValue), 'ig'); // eslint-disable-next-line fp/no-mutating-methods\n\n  return options.filter(function (option) {\n    var searchTermFoundInLabel = option.label ? option.label.match(inputValueRegExp) : false;\n    var searchTermFoundInSubtitle = option.subTitle ? option.subTitle.match(inputValueRegExp) : false;\n    var isSeparator = option.type === 'separator';\n    var notAlreadySelected = !selection.some(function (sel) {\n      return sel.id === option.id;\n    });\n    return (!inputValue || isSeparator || searchTermFoundInLabel || searchTermFoundInSubtitle) && notAlreadySelected;\n  }).splice(0, limit);\n};\n\nexport default filter;","map":{"version":3,"sources":["../../../.tmp-es/components/combobox/filter.js"],"names":["filter","inputValue","limit","options","selection","inputValueRegExp","escapeRegExp","searchTermFoundInLabel","option","searchTermFoundInSubtitle","isSeparator","notAlreadySelected","sel"],"mappings":"AAAA;;AACA;AACA,OAAA,YAAA,MAAA,qBAAA;AAEA;AACA;AACA;;AACA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAAA,IAAA,EAAoD;AAAA,MAAjDC,UAAiD,GAAA,IAAA,CAAjDA,UAAiD;AAAA,MAAA,UAAA,GAAA,IAAA,CAArCC,KAAqC;AAAA,MAArCA,KAAqC,GAAA,UAAA,KAAA,KAAA,CAAA,GAA7B,EAA6B,GAAA,UAAA;AAAA,MAAzBC,OAAyB,GAAA,IAAA,CAAzBA,OAAyB;AAAA,MAAhBC,SAAgB,GAAA,IAAA,CAAhBA,SAAgB;AAClE,MAAMC,gBAAgB,GAAG,IAAA,MAAA,CAAWC,YAAY,CAAvB,UAAuB,CAAvB,EADyC,IACzC,CAAzB,CADkE,CAElE;;AACA,SAAO,OAAO,CAAP,MAAA,CACE,UAAA,MAAA,EAAY;AACnB,QAAMC,sBAAsB,GAAGC,MAAM,CAANA,KAAAA,GAC5BA,MAAM,CAANA,KAAAA,CAAAA,KAAAA,CAD4BA,gBAC5BA,CAD4BA,GAA/B,KAAA;AAGA,QAAMC,yBAAyB,GAAGD,MAAM,CAANA,QAAAA,GAC/BA,MAAM,CAANA,QAAAA,CAAAA,KAAAA,CAD+BA,gBAC/BA,CAD+BA,GAAlC,KAAA;AAGA,QAAME,WAAW,GAAGF,MAAM,CAANA,IAAAA,KAApB,WAAA;AACA,QAAMG,kBAAkB,GAAG,CAAC,SAAS,CAAT,IAAA,CAAe,UAAA,GAAA,EAAA;AAAA,aAASC,GAAG,CAAHA,EAAAA,KAAWJ,MAAM,CAA1B,EAAA;AAA3C,KAA4B,CAA5B;AAEA,WACC,CAAC,CAAA,UAAA,IAAA,WAAA,IAAA,sBAAA,IAAD,yBAAA,KADD,kBAAA;AAXK,GAAA,EAAA,MAAA,CAAA,CAAA,EAAP,KAAO,CAAP;AAHD,CAAA;;AAwBA,eAAA,MAAA","sourcesContent":["/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\nimport escapeRegExp from 'lodash.escaperegexp';\n\n/**\n * SLDS recommends auto-complete/search inputs menus have a limit of 10 items.\n */\nconst filter = ({ inputValue, limit = 10, options, selection }) => {\n\tconst inputValueRegExp = new RegExp(escapeRegExp(inputValue), 'ig');\n\t// eslint-disable-next-line fp/no-mutating-methods\n\treturn options\n\t\t.filter((option) => {\n\t\t\tconst searchTermFoundInLabel = option.label\n\t\t\t\t? option.label.match(inputValueRegExp)\n\t\t\t\t: false;\n\t\t\tconst searchTermFoundInSubtitle = option.subTitle\n\t\t\t\t? option.subTitle.match(inputValueRegExp)\n\t\t\t\t: false;\n\t\t\tconst isSeparator = option.type === 'separator';\n\t\t\tconst notAlreadySelected = !selection.some((sel) => sel.id === option.id);\n\n\t\t\treturn (\n\t\t\t\t(!inputValue ||\n\t\t\t\t\tisSeparator ||\n\t\t\t\t\tsearchTermFoundInLabel ||\n\t\t\t\t\tsearchTermFoundInSubtitle) &&\n\t\t\t\tnotAlreadySelected\n\t\t\t);\n\t\t})\n\t\t.splice(0, limit);\n};\nexport default filter;\n"]},"metadata":{},"sourceType":"module"}