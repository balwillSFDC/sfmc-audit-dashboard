{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar _class, _temp;\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-disable max-lines */\n\n/* eslint-disable react/no-access-state-in-setstate */\n\n/* eslint-disable prefer-destructuring */\n\n/* eslint-disable max-lines */\n\n/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n/* eslint-disable jsx-a11y/role-has-required-aria-props */\n// # Lookup Component\n// Implements the [Lookup design pattern](https://latest-204.lightningdesignsystem.com/components/lookups) in React.\n// Based on SLDS v2.1.0-dev\n// ## Dependencies\n// ### React\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport escapeRegExp from 'lodash.escaperegexp';\nimport isEqual from 'lodash.isequal';\nimport classNames from 'classnames'; // This component's `checkProps` which issues warnings to developers about properties\n// when in development mode (similar to React's built in development tools)\n\nimport checkProps from './check-props'; // Children\n\nimport Dialog from '../utilities/dialog';\nimport Button from '../button';\nimport Icon from '../icon';\nimport InputIcon from '../icon/input-icon';\nimport Input from '../input'; // ### Event Helpers\n\nimport EventUtil from '../../utilities/event';\nimport KEYS from '../../utilities/key-code';\nimport Menu from './menu';\nimport { LOOKUP } from '../../utilities/constants';\nimport { IconSettingsContext } from '../icon-settings';\n/**\n * A function that takes a term string and an item and returns a truthy value if the item should be kept.\n */\n\nvar defaultFilter = function defaultFilter(term, item) {\n  if (!term) return true;\n  return item.data && item.data.type === 'section' || item.label.match(new RegExp(escapeRegExp(term), 'ig'));\n};\n\nvar normalizeSearchTerm = function normalizeSearchTerm(string) {\n  return (string || '').toString().replace(/^\\s+/, '');\n};\n/**\n * ** Lookup is deprecated. Please use an auto-complete Combobox instead.**\n *\n * Lookup is an advanced inline search form. The lookup can parse through single or multi scoped datasets. The parsed dataset can be filtered by single or multi option selects.\n *\n * This component is wrapped in a [higher order component to listen for clicks outside itself](https://github.com/kentor/react-click-outside) and thus requires use of `ReactDOM`.\n */\n\n\nvar Lookup = (_temp = _class = /*#__PURE__*/function (_React$Component) {\n  _inherits(Lookup, _React$Component);\n\n  var _super = _createSuper(Lookup);\n\n  function Lookup(props) {\n    var _this;\n\n    _classCallCheck(this, Lookup);\n\n    _this = _super.call(this, props); // `checkProps` issues warnings to developers about properties (similar to React's built in development tools)\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      currentFocus: null,\n      focusIndex: null,\n      items: [],\n      listLength: _this.props.options.length,\n      searchTerm: normalizeSearchTerm(_this.props.searchTerm),\n      selectedIndex: _this.props.selectedItem\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getClassName\", function () {\n      return classNames(_this.props.className, 'slds-form-element slds-lookup', {\n        'slds-has-selection': _this.isSelected(),\n        'slds-is-open': _this.getIsOpen()\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setFirstIndex\", function () {\n      var nextFocusIndex = 0;\n      var filteredItem = _this.state.items[0];\n\n      if (_this.menuComponent && _this.menuComponent.getFilteredItemForIndex) {\n        filteredItem = _this.menuComponent.getFilteredItemForIndex(nextFocusIndex);\n      }\n\n      if (filteredItem && filteredItem.data.type === 'section') {\n        nextFocusIndex += 1;\n      }\n\n      _this.setState({\n        focusIndex: nextFocusIndex\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getHeader\", function () {\n      var Header = _this.props.headerRenderer;\n      var headerActive = _this.state.focusIndex === 0;\n      return /*#__PURE__*/React.createElement(Header, _extends({\n        ref: function ref(header) {\n          _this.headerComponent = header;\n        }\n      }, _this.props, {\n        focusIndex: _this.state.focusIndex,\n        isActive: headerActive,\n        onClose: _this.handleClose,\n        searchTerm: _this.state.searchTerm,\n        setFocus: _this.setFocus\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFooter\", function () {\n      var Footer = _this.props.footerRenderer;\n\n      var numFocusable = _this.getNumFocusableItems();\n\n      var footerActive = _this.state.focusIndex === numFocusable;\n      return /*#__PURE__*/React.createElement(Footer, _extends({\n        ref: function ref(footer) {\n          _this.footerComponent = footer;\n        }\n      }, _this.props, {\n        focusIndex: _this.state.focusIndex,\n        isActive: footerActive,\n        onClose: _this.handleClose,\n        setFocus: _this.setFocus\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setFocus\", function (id) {\n      _this.setState({\n        currentFocus: id\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getIsOpen\", function () {\n      return !!(typeof _this.props.isOpen === 'boolean' ? _this.props.isOpen : _this.state.isOpen);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getListLength\", function (qty) {\n      if (qty !== _this.state.listLength) {\n        _this.setState({\n          listLength: qty\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getNumFocusableItems\", function () {\n      var offset = 0;\n\n      if (_this.footerComponent) {\n        offset += 1;\n      }\n\n      if (_this.headerComponent) {\n        offset += 1;\n      }\n\n      return _this.state.listLength - 1 + offset;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"increaseIndex\", function () {\n      var numFocusable = _this.getNumFocusableItems();\n\n      var nextFocusIndex = _this.state.focusIndex < numFocusable ? _this.state.focusIndex + 1 : 0;\n\n      var filteredItem = _this.menuComponent.getFilteredItemForIndex(nextFocusIndex);\n\n      if (filteredItem && filteredItem.data.type === 'section') {\n        nextFocusIndex += 1;\n      }\n\n      _this.setState({\n        focusIndex: nextFocusIndex\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"decreaseIndex\", function () {\n      var numFocusable = _this.getNumFocusableItems();\n\n      var prevFocusIndex = _this.state.focusIndex > 0 ? _this.state.focusIndex - 1 : numFocusable;\n\n      var filteredItem = _this.menuComponent.getFilteredItemForIndex(prevFocusIndex);\n\n      if (filteredItem && filteredItem.data.type === 'section') {\n        prevFocusIndex = prevFocusIndex === 0 ? numFocusable : prevFocusIndex - 1;\n      }\n\n      _this.setState({\n        focusIndex: prevFocusIndex\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItem\", function (itemId) {\n      if (itemId) {\n        var index = itemId.replace('item-', '');\n\n        _this.selectItemByIndex(index);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItemByIndex\", function (index) {\n      if (index >= 0 && index < _this.state.items.length) {\n        if (_this.props.onRequestClose) {\n          _this.props.onRequestClose();\n        }\n\n        _this.setState({\n          isOpen: false,\n          selectedIndex: index,\n          searchTerm: ''\n        });\n\n        var data = _this.state.items[index].data;\n\n        if (_this.props.onSelect) {\n          _this.props.onSelect(data);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDeleteSelected\", function () {\n      if (_this.props.onRequestOpen) {\n        _this.props.onRequestOpen();\n      }\n\n      _this.setState({\n        selectedIndex: null,\n        isOpen: true\n      });\n\n      _this.focusInput();\n\n      if (_this.props.onUnselect) {\n        _this.props.onUnselect();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClose\", function () {\n      if (_this.props.onRequestClose) {\n        _this.props.onRequestClose();\n      }\n\n      _this.setState({\n        isOpen: false,\n        focusIndex: null,\n        currentFocus: null\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClickOutside\", function () {\n      _this.handleClose();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEscape\", function (event) {\n      if (_this.getIsOpen() && event) {\n        EventUtil.trap(event);\n      }\n\n      _this.handleClose();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCancel\", function () {\n      _this.handleClose();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClick\", function () {\n      if (_this.props.onRequestOpen) {\n        _this.props.onRequestOpen();\n      }\n\n      _this.setState({\n        isOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleBlur\", function (event) {\n      if (_this.props.onBlur) {\n        var target = event.target || event.currentTarget;\n\n        _this.props.onBlur(target.value);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleFocus\", function (event) {\n      if (_this.props.onFocus) {\n        var target = event.target || event.currentTarget;\n\n        _this.props.onFocus(target.value);\n      }\n\n      if (_this.props.onRequestOpen) {\n        _this.props.onRequestOpen();\n      }\n\n      _this.setState({\n        isOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      var target = event.target || event.currentTarget;\n\n      _this.setState({\n        searchTerm: normalizeSearchTerm(target.value)\n      });\n\n      if (_this.props.onChange) {\n        _this.props.onChange(target.value);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyDown\", function (event) {\n      if (event.keyCode) {\n        // If user hits esc key or tab key, close menu\n        if (event.keyCode === KEYS.ESCAPE) {\n          _this.handleEscape(event);\n        } else if (event.keyCode === KEYS.TAB) {\n          // remove the focus on input, tab focus shoud move to next tabbale elemnt\n          setTimeout(function () {\n            _this.handleClose();\n          }, 200);\n\n          _this.handleBlur(event);\n        } else {\n          _this.handleClick();\n        } // If user hits down key, advance aria activedescendant to next item\n\n\n        if (event.keyCode === KEYS.DOWN) {\n          EventUtil.trapImmediate(event);\n\n          if (_this.state.focusIndex === null) {\n            _this.setFirstIndex();\n          } else {\n            _this.increaseIndex();\n          }\n        } else if (event.keyCode === KEYS.UP) {\n          // If user hits up key, advance aria activedescendant to previous item\n          EventUtil.trapImmediate(event);\n\n          var numFocusable = _this.getNumFocusableItems();\n\n          if (_this.state.focusIndex === null) {\n            _this.setState({\n              focusIndex: numFocusable\n            });\n          } else {\n            _this.decreaseIndex();\n          }\n        } else if (event.keyCode === KEYS.ENTER && _this.state.focusIndex !== null) {\n          // If user hits enter, select current activedescendant item\n          EventUtil.trapImmediate(event); // If the focus is on the first fixed Action Item in Menu, click it\n\n          if (_this.headerComponent && _this.state.focusIndex === 0) {\n            _this.headerComponent.handleClick();\n          } else if (_this.footerComponent && _this.state.focusIndex === _this.state.listLength + 1) {\n            // If the focus is on the last fixed Action Item in Menu, click it\n            _this.footerComponent.handleClick();\n          } else {\n            // If not, then select menu item\n            _this.selectItem(_this.state.currentFocus);\n          }\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handlePillKeyDown\", function (event) {\n      if (event.keyCode) {\n        if (event.keyCode === KEYS.DELETE || event.keyCode === KEYS.BACKSPACE) {\n          EventUtil.trapImmediate(event);\n\n          _this.handleDeleteSelected();\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"inputRefId\", function () {\n      return \"\".concat(_this.props.label, \"Lookup\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"focusInput\", function () {\n      _this.focusOnRender = true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isSelected\", function () {\n      var hasSelection = !isNaN(parseInt(_this.state.selectedIndex, 10)) && _this.state.selectedIndex >= 0;\n      return hasSelection;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modifyItems\", function (itemsToModify) {\n      var items = itemsToModify.map(function (item, index) {\n        return {\n          id: \"item-\".concat(index),\n          label: item.label,\n          data: item\n        };\n      });\n\n      _this.setState({\n        items: items\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMenuContent\", function () {\n      return /*#__PURE__*/React.createElement(Menu, {\n        ref: function ref(menu) {\n          _this.menuComponent = menu;\n        },\n        emptyMessage: _this.props.emptyMessage,\n        filterWith: _this.props.filterWith,\n        focusIndex: _this.state.focusIndex,\n        footer: _this.props.footerRenderer ? _this.getFooter() : null,\n        getListLength: _this.getListLength,\n        header: _this.props.headerRenderer ? _this.getHeader() : null,\n        iconCategory: _this.props.iconCategory,\n        iconInverse: _this.props.iconInverse,\n        iconName: _this.props.iconName,\n        items: _this.state.items,\n        label: _this.props.label,\n        listItemLabelRenderer: _this.props.listItemLabelRenderer,\n        listLength: _this.state.listLength,\n        onSelect: _this.selectItem,\n        searchTerm: _this.state.searchTerm,\n        sectionDividerRenderer: _this.props.sectionDividerRenderer,\n        setFocus: _this.setFocus\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInlineMenu\", function () {\n      return _this.getIsOpen() ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"ignore-react-onclickoutside slds-lookup__menu\",\n        role: \"listbox\"\n      }, _this.renderMenuContent()) : null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSeparateMenu\", function () {\n      // FOR BACKWARDS COMPATIBILITY\n      var menuPosition = _this.props.isInline ? 'relative' : _this.props.menuPosition; // eslint-disable-line react/prop-types\n\n      return _this.getIsOpen() ? /*#__PURE__*/React.createElement(Dialog, {\n        align: \"bottom\",\n        className: \"slds-lookup__menu slds-show\",\n        closeOnTabKey: true,\n        contentsClassName: \"slds-lookup__menu slds-show\",\n        context: _this.context,\n        inheritWidthOf: \"target\",\n        onClose: _this.handleCancel,\n        hasStaticAlignement: !_this.props.flippable,\n        constrainToScrollParent: _this.props.constrainToScrollParent,\n        onRequestTargetElement: function onRequestTargetElement() {\n          return _this.input;\n        },\n        position: menuPosition\n      }, _this.renderMenuContent()) : null;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInput\", function () {\n      return /*#__PURE__*/React.createElement(Input, {\n        \"aria-activedescendant\": _this.state.currentFocus ? _this.state.currentFocus : '',\n        \"aria-autocomplete\": \"list\",\n        \"aria-describedby\": _this.props.describedById,\n        \"aria-expanded\": !!_this.getIsOpen(),\n        assistiveText: _this.props.assistiveText,\n        className: \"slds-lookup__search-input\",\n        disabled: _this.props.disabled,\n        iconRight: /*#__PURE__*/React.createElement(InputIcon, {\n          assistiveText: {\n            icon: 'Search'\n          },\n          category: \"utility\",\n          name: \"search\"\n        }),\n        id: _this.inputRefId(),\n        onBlur: _this.handleBlur,\n        onChange: _this.handleChange,\n        onClick: _this.handleClick,\n        onFocus: _this.handleFocus,\n        onKeyDown: _this.handleKeyDown,\n        inputRef: function inputRef(component) {\n          _this.input = component;\n\n          if (_this.focusOnRender) {\n            _this.input.focus();\n\n            _this.focusOnRender = false;\n          }\n        },\n        placeholder: _this.props.placeholder,\n        role: \"combobox\",\n        type: \"text\",\n        value: _this.state.searchTerm\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSelectedItem\", function () {\n      var selectedItem = _this.props.options[_this.state.selectedIndex].label;\n      var renderIcon = _this.props.iconName ? /*#__PURE__*/React.createElement(Icon, {\n        category: _this.props.iconCategory,\n        className: \"slds-icon slds-pill__icon\",\n        inverse: _this.props.iconInverse,\n        name: _this.props.iconName\n      }) : null;\n      var labelClassName = _this.props.iconName ? 'slds-pill__label' : 'slds-pill__label slds-m-left_x-small'; // i18n\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"slds-pill__container\"\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        className: \"slds-pill\",\n        ref: function ref(pill) {\n          _this.pills[_this.state.selectedIndex] = pill;\n        },\n        onClick: function onClick(event) {\n          return event.preventDefault();\n        },\n        onKeyDown: _this.handlePillKeyDown\n      }, renderIcon, /*#__PURE__*/React.createElement(\"span\", {\n        className: labelClassName\n      }, selectedItem), /*#__PURE__*/React.createElement(Button, {\n        assistiveText: {\n          icon: 'Press delete to remove'\n        },\n        className: \"slds-pill__remove slds-button_icon-bare\",\n        iconCategory: \"utility\",\n        iconName: \"close\",\n        onClick: _this.handleDeleteSelected,\n        tabIndex: \"-1\",\n        variant: \"icon\"\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderLabel\", function () {\n      var inputLabel;\n      var required = _this.props.required ?\n      /*#__PURE__*/\n      // eslint-disable-next-line react/jsx-curly-brace-presence\n      React.createElement(\"span\", {\n        className: \"slds-required\"\n      }, '*') : null;\n\n      if (_this.isSelected()) {\n        // inline style override\n        inputLabel = /*#__PURE__*/React.createElement(\"span\", {\n          className: \"slds-form-element__label\",\n          style: {\n            width: '100%'\n          }\n        }, required, _this.props.label);\n      } else {\n        inputLabel = /*#__PURE__*/React.createElement(\"label\", {\n          className: \"slds-form-element__label\",\n          htmlFor: _this.inputRefId(),\n          style: {\n            width: '100%'\n          }\n        }, required, _this.props.label);\n      }\n\n      return inputLabel;\n    });\n\n    checkProps(LOOKUP, props); // Keeps track of references of children for keyboard navigation\n\n    _this.pills = [];\n    return _this;\n  }\n\n  _createClass(Lookup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.modifyItems(this.props.options);\n    } // eslint-disable-next-line camelcase, react/sort-comp\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(newProps) {\n      if (newProps.options) {\n        this.modifyItems(newProps.options);\n      }\n\n      if (newProps.selectedItem !== this.props.selectedItem || !isEqual(newProps.options, this.props.options)) {\n        this.setState({\n          selectedIndex: newProps.selectedItem\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!isNaN(parseInt(prevState.selectedIndex, 10)) && isNaN(parseInt(this.state.selectedIndex, 10))) {\n        if (this.input) {\n          this.input.focus();\n        }\n      } else if (isNaN(parseInt(prevState.selectedIndex, 10)) && !isNaN(parseInt(this.state.selectedIndex, 10))) {\n        if (this.pills[this.state.selectedIndex]) {\n          this.pills[this.state.selectedIndex].focus();\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isInline;\n      /* eslint-disable react/prop-types */\n\n      if (this.props.isInline) {\n        isInline = true;\n      } else if (this.props.modal !== undefined) {\n        isInline = !this.props.modal;\n      }\n      /* eslint-enable react/prop-types */\n\n\n      var formElementControlClasses = _defineProperty({\n        'slds-form-element__control': true\n      }, \"slds-input-has-icon slds-input-has-icon_\".concat(this.props.iconPosition), !this.isSelected());\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: this.getClassName(),\n        \"data-select\": \"single\",\n        \"data-scope\": \"single\",\n        onScroll: this.props.onScroll\n      }, this.props.label ? this.renderLabel() : null, /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(formElementControlClasses)\n      }, this.isSelected() ? this.renderSelectedItem() : null, !this.isSelected() ? this.renderInput() : null), isInline ? this.renderInlineMenu() : this.renderSeparateMenu());\n    }\n  }]);\n\n  return Lookup;\n}(React.Component), _defineProperty(_class, \"displayName\", LOOKUP), _defineProperty(_class, \"propTypes\", {\n  /**\n   * If present, the label associated with this `input` is overwritten\n   * by this text and is visually not shown.\n   */\n  assistiveText: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\n  /**\n   * Class names to be added to the tag classed with `slds-lookup`.\n   */\n  className: PropTypes.oneOfType([PropTypes.array, PropTypes.object, PropTypes.string]),\n\n  /**\n   * If true, constrains the menu to the scroll parent. Has no effect if `isInline` is `true`.\n   */\n  constrainToScrollParent: PropTypes.bool,\n\n  /**\n   * ID for aria-describedby (e.g. for an error message or a description)\n   */\n  describedById: PropTypes.string,\n\n  /**\n   * Please select one of the following:\n   * * `absolute` - (default) The dialog will use `position: absolute` and style attributes to position itself. This allows inverted placement or flipping of the dialog.\n   * * `overflowBoundaryElement` - The dialog will overflow scrolling parents. Use on elements that are aligned to the left or right of their target and don't care about the target being within a scrolling parent. Typically this is a popover or tooltip. Dropdown menus can usually open up and down if no room exists. In order to achieve this a portal element will be created and attached to `body`. This element will render into that detached render tree.\n   * * `relative` - No styling or portals will be used. Menus will be positioned relative to their triggers. This is a great choice for HTML snapshot testing.\n   */\n  menuPosition: PropTypes.string,\n\n  /**\n   * This prop is passed onto the `input`. Prevents dropdown menu from opening. Also applies disabled styling to input.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Custom message that renders when no matches found. The default empty state is just text that says, 'No matches found.'.\n   */\n  emptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n\n  /**\n   * Custom function to filter the Lookup items when typing into input field. The default function is case-insensitive and uses the searchTerm to filter Lookup items on their labels.\n   */\n  filterWith: PropTypes.func,\n\n  /**\n   * If true, the menu is constrained to the window and may be flipped up. Has no effect if `isInline` is `true`. In other components, its opposite is used `hasStaticAlignment`.\n   */\n  flippable: PropTypes.bool,\n\n  /**\n   * Custom component for Lookup footer. The default footer allows user to add new item - see <a href='http://www.lightningdesignsystem.com/components/lookups/#base'>Lightning Design System Lookup > Base</a>. To use the default footer, pass in <code>Lookup.DefaultFooter</code>.\n   */\n  footerRenderer: PropTypes.func,\n\n  /**\n   * Custom component for Lookup header. The default header has a search icon and shows the search term - see <a href='http://www.lightningdesignsystem.com/components/lookups/#base'>Lightning Design System Lookup > Base</a>. To use the default header, pass in <code>Lookup.DefaultHeader</code>.\n   */\n  headerRenderer: PropTypes.func,\n\n  /**\n   * Please refer to <a href='http://www.lightningdesignsystem.com/resources/icons'>Lightning Design System Icons</a> to view categories.\n   */\n  iconCategory: PropTypes.string,\n\n  /**\n   * If true, icon color is white. If false, icon color is the default text color.\n   */\n  iconInverse: PropTypes.bool,\n\n  /**\n   * Name of icon. Please refer to <a href='http://www.lightningdesignsystem.com/resources/icons'>Lightning Design System Icons</a> to view icon names.\n   */\n  iconName: PropTypes.string,\n\n  /**\n   * Determines whether the input's icon will display that icon on the left or the right.\n   */\n  iconPosition: PropTypes.oneOf(['left', 'right']),\n\n  /**\n   * Renders menu within the wrapping trigger as a sibling of the button. By default, you will have an absolutely positioned container at an elevated z-index.\n   */\n  isInline: PropTypes.bool,\n\n  /**\n   * Whether or not the dropdown menu is open. This overrides the default behavior.\n   */\n  isOpen: PropTypes.bool,\n\n  /**\n   * Form label for input.\n   */\n  label: PropTypes.string,\n\n  /**\n   * Custom component that overrides the default Lookup Item component.\n   */\n  listItemLabelRenderer: PropTypes.func,\n\n  /**\n   * Triggered when input focus is removed.\n   */\n  onBlur: PropTypes.func,\n\n  /**\n   * Triggered when the contents of the input changes.\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * Triggered when input is focused.\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * Function called when the lookup dropdown would like hide. This will turn the Lookup into into a controlled component. Please use with `isOpen`.\n   */\n  onRequestClose: PropTypes.func,\n\n  /**\n   * Function called when the lookup dropdown would like show. This will turn the Lookup into into a controlled component. Please use with `isOpen`.\n   */\n  onRequestOpen: PropTypes.func,\n\n  /**\n   * Triggered when the user scrolls in the dropdown menu.\n   */\n  onScroll: PropTypes.func,\n\n  /**\n   * Triggered when an item is selected from the dropdown menu.\n   */\n  onSelect: PropTypes.func,\n\n  /**\n   * Triggered when an item is an item is removed from the input.\n   */\n  onUnselect: PropTypes.func,\n\n  /**\n   * Item added to the dropdown menu.\n   */\n  options: PropTypes.array.isRequired,\n\n  /**\n   * Text that will appear in an empty input.\n   */\n  placeholder: PropTypes.string,\n\n  /**\n   * If true, adds asterisk next to input label to indicate it is a required field.\n   */\n  required: PropTypes.bool,\n\n  /**\n   * Text passed on to header search input of dropdown menu.\n   */\n  searchTerm: PropTypes.string,\n\n  /**\n   * Custom component that overrides the default section divider\n   */\n  sectionDividerRenderer: PropTypes.func,\n\n  /**\n   * Index of current selected item. To clear the selection, pass in -1.\n   */\n  selectedItem: PropTypes.number\n}), _defineProperty(_class, \"defaultProps\", {\n  constrainToScrollParent: true,\n  filterWith: defaultFilter,\n  iconPosition: 'right',\n  searchTerm: '',\n  menuPosition: 'absolute'\n}), _temp);\nLookup.contextType = IconSettingsContext;\nexport default Lookup;","map":{"version":3,"sources":["../../../.tmp-es/components/lookup/lookup.jsx"],"names":["defaultFilter","item","escapeRegExp","normalizeSearchTerm","string","Lookup","React","assistiveText","PropTypes","className","constrainToScrollParent","describedById","menuPosition","disabled","emptyMessage","filterWith","flippable","footerRenderer","headerRenderer","iconCategory","iconInverse","iconName","iconPosition","isInline","isOpen","label","listItemLabelRenderer","onBlur","onChange","onFocus","onRequestClose","onRequestOpen","onScroll","onSelect","onUnselect","options","placeholder","required","searchTerm","sectionDividerRenderer","selectedItem","number","currentFocus","focusIndex","items","listLength","selectedIndex","checkProps","newProps","isEqual","isNaN","parseInt","prevState","classNames","nextFocusIndex","filteredItem","Header","headerActive","setFocus","Footer","numFocusable","footerActive","id","qty","offset","prevFocusIndex","index","itemId","data","EventUtil","target","event","KEYS","setTimeout","hasSelection","icon","renderIcon","labelClassName","handlePillKeyDown","inputLabel","width","formElementControlClasses"],"mappings":"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","sourcesContent":["/* eslint-disable max-lines */\n/* eslint-disable react/no-access-state-in-setstate */\n/* eslint-disable prefer-destructuring */\n/* eslint-disable max-lines */\n/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n/* eslint-disable jsx-a11y/role-has-required-aria-props */\n\n// # Lookup Component\n\n// Implements the [Lookup design pattern](https://latest-204.lightningdesignsystem.com/components/lookups) in React.\n// Based on SLDS v2.1.0-dev\n\n// ## Dependencies\n\n// ### React\nimport React from 'react';\n\nimport PropTypes from 'prop-types';\nimport escapeRegExp from 'lodash.escaperegexp';\nimport isEqual from 'lodash.isequal';\nimport classNames from 'classnames';\n\n// This component's `checkProps` which issues warnings to developers about properties\n// when in development mode (similar to React's built in development tools)\nimport checkProps from './check-props';\n\n// Children\nimport Dialog from '../utilities/dialog';\nimport Button from '../button';\nimport Icon from '../icon';\nimport InputIcon from '../icon/input-icon';\nimport Input from '../input';\n\n// ### Event Helpers\nimport EventUtil from '../../utilities/event';\nimport KEYS from '../../utilities/key-code';\n\nimport Menu from './menu';\n\nimport { LOOKUP } from '../../utilities/constants';\nimport { IconSettingsContext } from '../icon-settings';\n\n/**\n * A function that takes a term string and an item and returns a truthy value if the item should be kept.\n */\nconst defaultFilter = (term, item) => {\n\tif (!term) return true;\n\treturn (\n\t\t(item.data && item.data.type === 'section') ||\n\t\titem.label.match(new RegExp(escapeRegExp(term), 'ig'))\n\t);\n};\n\nconst normalizeSearchTerm = (string) =>\n\t(string || '').toString().replace(/^\\s+/, '');\n\n/**\n * ** Lookup is deprecated. Please use an auto-complete Combobox instead.**\n *\n * Lookup is an advanced inline search form. The lookup can parse through single or multi scoped datasets. The parsed dataset can be filtered by single or multi option selects.\n *\n * This component is wrapped in a [higher order component to listen for clicks outside itself](https://github.com/kentor/react-click-outside) and thus requires use of `ReactDOM`.\n */\nconst Lookup = class extends React.Component {\n\tstatic displayName = LOOKUP;\n\n\tstatic propTypes = {\n\t\t/**\n\t\t * If present, the label associated with this `input` is overwritten\n\t\t * by this text and is visually not shown.\n\t\t */\n\t\tassistiveText: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\t\t/**\n\t\t * Class names to be added to the tag classed with `slds-lookup`.\n\t\t */\n\t\tclassName: PropTypes.oneOfType([\n\t\t\tPropTypes.array,\n\t\t\tPropTypes.object,\n\t\t\tPropTypes.string,\n\t\t]),\n\t\t/**\n\t\t * If true, constrains the menu to the scroll parent. Has no effect if `isInline` is `true`.\n\t\t */\n\t\tconstrainToScrollParent: PropTypes.bool,\n\t\t/**\n\t\t * ID for aria-describedby (e.g. for an error message or a description)\n\t\t */\n\t\tdescribedById: PropTypes.string,\n\t\t/**\n\t\t * Please select one of the following:\n\t\t * * `absolute` - (default) The dialog will use `position: absolute` and style attributes to position itself. This allows inverted placement or flipping of the dialog.\n\t\t * * `overflowBoundaryElement` - The dialog will overflow scrolling parents. Use on elements that are aligned to the left or right of their target and don't care about the target being within a scrolling parent. Typically this is a popover or tooltip. Dropdown menus can usually open up and down if no room exists. In order to achieve this a portal element will be created and attached to `body`. This element will render into that detached render tree.\n\t\t * * `relative` - No styling or portals will be used. Menus will be positioned relative to their triggers. This is a great choice for HTML snapshot testing.\n\t\t */\n\t\tmenuPosition: PropTypes.string,\n\t\t/**\n\t\t * This prop is passed onto the `input`. Prevents dropdown menu from opening. Also applies disabled styling to input.\n\t\t */\n\t\tdisabled: PropTypes.bool,\n\t\t/**\n\t\t * Custom message that renders when no matches found. The default empty state is just text that says, 'No matches found.'.\n\t\t */\n\t\temptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n\t\t/**\n\t\t * Custom function to filter the Lookup items when typing into input field. The default function is case-insensitive and uses the searchTerm to filter Lookup items on their labels.\n\t\t */\n\t\tfilterWith: PropTypes.func,\n\t\t/**\n\t\t * If true, the menu is constrained to the window and may be flipped up. Has no effect if `isInline` is `true`. In other components, its opposite is used `hasStaticAlignment`.\n\t\t */\n\t\tflippable: PropTypes.bool,\n\t\t/**\n\t\t * Custom component for Lookup footer. The default footer allows user to add new item - see <a href='http://www.lightningdesignsystem.com/components/lookups/#base'>Lightning Design System Lookup > Base</a>. To use the default footer, pass in <code>Lookup.DefaultFooter</code>.\n\t\t */\n\t\tfooterRenderer: PropTypes.func,\n\t\t/**\n\t\t * Custom component for Lookup header. The default header has a search icon and shows the search term - see <a href='http://www.lightningdesignsystem.com/components/lookups/#base'>Lightning Design System Lookup > Base</a>. To use the default header, pass in <code>Lookup.DefaultHeader</code>.\n\t\t */\n\t\theaderRenderer: PropTypes.func,\n\t\t/**\n\t\t * Please refer to <a href='http://www.lightningdesignsystem.com/resources/icons'>Lightning Design System Icons</a> to view categories.\n\t\t */\n\t\ticonCategory: PropTypes.string,\n\t\t/**\n\t\t * If true, icon color is white. If false, icon color is the default text color.\n\t\t */\n\t\ticonInverse: PropTypes.bool,\n\t\t/**\n\t\t * Name of icon. Please refer to <a href='http://www.lightningdesignsystem.com/resources/icons'>Lightning Design System Icons</a> to view icon names.\n\t\t */\n\t\ticonName: PropTypes.string,\n\t\t/**\n\t\t * Determines whether the input's icon will display that icon on the left or the right.\n\t\t */\n\t\ticonPosition: PropTypes.oneOf(['left', 'right']),\n\t\t/**\n\t\t * Renders menu within the wrapping trigger as a sibling of the button. By default, you will have an absolutely positioned container at an elevated z-index.\n\t\t */\n\t\tisInline: PropTypes.bool,\n\t\t/**\n\t\t * Whether or not the dropdown menu is open. This overrides the default behavior.\n\t\t */\n\t\tisOpen: PropTypes.bool,\n\t\t/**\n\t\t * Form label for input.\n\t\t */\n\t\tlabel: PropTypes.string,\n\t\t/**\n\t\t * Custom component that overrides the default Lookup Item component.\n\t\t */\n\t\tlistItemLabelRenderer: PropTypes.func,\n\t\t/**\n\t\t * Triggered when input focus is removed.\n\t\t */\n\t\tonBlur: PropTypes.func,\n\t\t/**\n\t\t * Triggered when the contents of the input changes.\n\t\t */\n\t\tonChange: PropTypes.func,\n\t\t/**\n\t\t * Triggered when input is focused.\n\t\t */\n\t\tonFocus: PropTypes.func,\n\t\t/**\n\t\t * Function called when the lookup dropdown would like hide. This will turn the Lookup into into a controlled component. Please use with `isOpen`.\n\t\t */\n\t\tonRequestClose: PropTypes.func,\n\t\t/**\n\t\t * Function called when the lookup dropdown would like show. This will turn the Lookup into into a controlled component. Please use with `isOpen`.\n\t\t */\n\t\tonRequestOpen: PropTypes.func,\n\t\t/**\n\t\t * Triggered when the user scrolls in the dropdown menu.\n\t\t */\n\t\tonScroll: PropTypes.func,\n\t\t/**\n\t\t * Triggered when an item is selected from the dropdown menu.\n\t\t */\n\t\tonSelect: PropTypes.func,\n\t\t/**\n\t\t * Triggered when an item is an item is removed from the input.\n\t\t */\n\t\tonUnselect: PropTypes.func,\n\t\t/**\n\t\t * Item added to the dropdown menu.\n\t\t */\n\t\toptions: PropTypes.array.isRequired,\n\t\t/**\n\t\t * Text that will appear in an empty input.\n\t\t */\n\t\tplaceholder: PropTypes.string,\n\t\t/**\n\t\t * If true, adds asterisk next to input label to indicate it is a required field.\n\t\t */\n\t\trequired: PropTypes.bool,\n\t\t/**\n\t\t * Text passed on to header search input of dropdown menu.\n\t\t */\n\t\tsearchTerm: PropTypes.string,\n\t\t/**\n\t\t * Custom component that overrides the default section divider\n\t\t */\n\t\tsectionDividerRenderer: PropTypes.func,\n\t\t/**\n\t\t * Index of current selected item. To clear the selection, pass in -1.\n\t\t */\n\t\tselectedItem: PropTypes.number,\n\t};\n\n\tstatic defaultProps = {\n\t\tconstrainToScrollParent: true,\n\t\tfilterWith: defaultFilter,\n\t\ticonPosition: 'right',\n\t\tsearchTerm: '',\n\t\tmenuPosition: 'absolute',\n\t};\n\n\tstate = {\n\t\tcurrentFocus: null,\n\t\tfocusIndex: null,\n\t\titems: [],\n\t\tlistLength: this.props.options.length,\n\t\tsearchTerm: normalizeSearchTerm(this.props.searchTerm),\n\t\tselectedIndex: this.props.selectedItem,\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\t// `checkProps` issues warnings to developers about properties (similar to React's built in development tools)\n\t\tcheckProps(LOOKUP, props);\n\n\t\t// Keeps track of references of children for keyboard navigation\n\t\tthis.pills = [];\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.modifyItems(this.props.options);\n\t}\n\n\t// eslint-disable-next-line camelcase, react/sort-comp\n\tUNSAFE_componentWillReceiveProps(newProps) {\n\t\tif (newProps.options) {\n\t\t\tthis.modifyItems(newProps.options);\n\t\t}\n\t\tif (\n\t\t\tnewProps.selectedItem !== this.props.selectedItem ||\n\t\t\t!isEqual(newProps.options, this.props.options)\n\t\t) {\n\t\t\tthis.setState({ selectedIndex: newProps.selectedItem });\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (\n\t\t\t!isNaN(parseInt(prevState.selectedIndex, 10)) &&\n\t\t\tisNaN(parseInt(this.state.selectedIndex, 10))\n\t\t) {\n\t\t\tif (this.input) {\n\t\t\t\tthis.input.focus();\n\t\t\t}\n\t\t} else if (\n\t\t\tisNaN(parseInt(prevState.selectedIndex, 10)) &&\n\t\t\t!isNaN(parseInt(this.state.selectedIndex, 10))\n\t\t) {\n\t\t\tif (this.pills[this.state.selectedIndex]) {\n\t\t\t\tthis.pills[this.state.selectedIndex].focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetClassName = () =>\n\t\tclassNames(this.props.className, 'slds-form-element slds-lookup', {\n\t\t\t'slds-has-selection': this.isSelected(),\n\t\t\t'slds-is-open': this.getIsOpen(),\n\t\t});\n\n\tsetFirstIndex = () => {\n\t\tlet nextFocusIndex = 0;\n\t\tlet filteredItem = this.state.items[0];\n\n\t\tif (this.menuComponent && this.menuComponent.getFilteredItemForIndex) {\n\t\t\tfilteredItem = this.menuComponent.getFilteredItemForIndex(nextFocusIndex);\n\t\t}\n\n\t\tif (filteredItem && filteredItem.data.type === 'section') {\n\t\t\tnextFocusIndex += 1;\n\t\t}\n\n\t\tthis.setState({ focusIndex: nextFocusIndex });\n\t};\n\n\tgetHeader = () => {\n\t\tconst Header = this.props.headerRenderer;\n\t\tconst headerActive = this.state.focusIndex === 0;\n\n\t\treturn (\n\t\t\t<Header\n\t\t\t\tref={(header) => {\n\t\t\t\t\tthis.headerComponent = header;\n\t\t\t\t}}\n\t\t\t\t{...this.props}\n\t\t\t\tfocusIndex={this.state.focusIndex}\n\t\t\t\tisActive={headerActive}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tsearchTerm={this.state.searchTerm}\n\t\t\t\tsetFocus={this.setFocus}\n\t\t\t/>\n\t\t);\n\t};\n\n\tgetFooter = () => {\n\t\tconst Footer = this.props.footerRenderer;\n\t\tconst numFocusable = this.getNumFocusableItems();\n\t\tconst footerActive = this.state.focusIndex === numFocusable;\n\n\t\treturn (\n\t\t\t<Footer\n\t\t\t\tref={(footer) => {\n\t\t\t\t\tthis.footerComponent = footer;\n\t\t\t\t}}\n\t\t\t\t{...this.props}\n\t\t\t\tfocusIndex={this.state.focusIndex}\n\t\t\t\tisActive={footerActive}\n\t\t\t\tonClose={this.handleClose}\n\t\t\t\tsetFocus={this.setFocus}\n\t\t\t/>\n\t\t);\n\t};\n\n\tsetFocus = (id) => {\n\t\tthis.setState({ currentFocus: id });\n\t};\n\n\tgetIsOpen = () =>\n\t\t!!(typeof this.props.isOpen === 'boolean'\n\t\t\t? this.props.isOpen\n\t\t\t: this.state.isOpen);\n\n\tgetListLength = (qty) => {\n\t\tif (qty !== this.state.listLength) {\n\t\t\tthis.setState({ listLength: qty });\n\t\t}\n\t};\n\n\tgetNumFocusableItems = () => {\n\t\tlet offset = 0;\n\n\t\tif (this.footerComponent) {\n\t\t\toffset += 1;\n\t\t}\n\n\t\tif (this.headerComponent) {\n\t\t\toffset += 1;\n\t\t}\n\n\t\treturn this.state.listLength - 1 + offset;\n\t};\n\n\t// =================================================\n\t// Using down/up keys, set Focus on list item and assign it to aria-activedescendant attribute in input.\n\t// Need to keep track of filtered list length to be able to increment/decrement the focus index so it's contained to the number of available list items.\n\tincreaseIndex = () => {\n\t\tconst numFocusable = this.getNumFocusableItems();\n\t\tlet nextFocusIndex =\n\t\t\tthis.state.focusIndex < numFocusable ? this.state.focusIndex + 1 : 0;\n\t\tconst filteredItem = this.menuComponent.getFilteredItemForIndex(\n\t\t\tnextFocusIndex\n\t\t);\n\n\t\tif (filteredItem && filteredItem.data.type === 'section') {\n\t\t\tnextFocusIndex += 1;\n\t\t}\n\n\t\tthis.setState({ focusIndex: nextFocusIndex });\n\t};\n\n\tdecreaseIndex = () => {\n\t\tconst numFocusable = this.getNumFocusableItems();\n\t\tlet prevFocusIndex =\n\t\t\tthis.state.focusIndex > 0 ? this.state.focusIndex - 1 : numFocusable;\n\t\tconst filteredItem = this.menuComponent.getFilteredItemForIndex(\n\t\t\tprevFocusIndex\n\t\t);\n\n\t\tif (filteredItem && filteredItem.data.type === 'section') {\n\t\t\tprevFocusIndex = prevFocusIndex === 0 ? numFocusable : prevFocusIndex - 1;\n\t\t}\n\n\t\tthis.setState({ focusIndex: prevFocusIndex });\n\t};\n\n\t// =================================================\n\t// Select menu item (onClick or on key enter/space)\n\tselectItem = (itemId) => {\n\t\tif (itemId) {\n\t\t\tconst index = itemId.replace('item-', '');\n\t\t\tthis.selectItemByIndex(index);\n\t\t}\n\t};\n\n\tselectItemByIndex = (index) => {\n\t\tif (index >= 0 && index < this.state.items.length) {\n\t\t\tif (this.props.onRequestClose) {\n\t\t\t\tthis.props.onRequestClose();\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tisOpen: false,\n\t\t\t\tselectedIndex: index,\n\t\t\t\tsearchTerm: '',\n\t\t\t});\n\t\t\tconst data = this.state.items[index].data;\n\t\t\tif (this.props.onSelect) {\n\t\t\t\tthis.props.onSelect(data);\n\t\t\t}\n\t\t}\n\t};\n\n\thandleDeleteSelected = () => {\n\t\tif (this.props.onRequestOpen) {\n\t\t\tthis.props.onRequestOpen();\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedIndex: null,\n\t\t\tisOpen: true,\n\t\t});\n\n\t\tthis.focusInput();\n\n\t\tif (this.props.onUnselect) {\n\t\t\tthis.props.onUnselect();\n\t\t}\n\t};\n\n\t// =================================================\n\t// Event Listeners on Input\n\thandleClose = () => {\n\t\tif (this.props.onRequestClose) {\n\t\t\tthis.props.onRequestClose();\n\t\t}\n\t\tthis.setState({\n\t\t\tisOpen: false,\n\t\t\tfocusIndex: null,\n\t\t\tcurrentFocus: null,\n\t\t});\n\t};\n\n\thandleClickOutside = () => {\n\t\tthis.handleClose();\n\t};\n\n\thandleEscape = (event) => {\n\t\tif (this.getIsOpen() && event) {\n\t\t\tEventUtil.trap(event);\n\t\t}\n\t\tthis.handleClose();\n\t};\n\n\thandleCancel = () => {\n\t\tthis.handleClose();\n\t};\n\n\thandleClick = () => {\n\t\tif (this.props.onRequestOpen) {\n\t\t\tthis.props.onRequestOpen();\n\t\t}\n\t\tthis.setState({ isOpen: true });\n\t};\n\n\thandleBlur = (event) => {\n\t\tif (this.props.onBlur) {\n\t\t\tconst target = event.target || event.currentTarget;\n\t\t\tthis.props.onBlur(target.value);\n\t\t}\n\t};\n\n\thandleFocus = (event) => {\n\t\tif (this.props.onFocus) {\n\t\t\tconst target = event.target || event.currentTarget;\n\t\t\tthis.props.onFocus(target.value);\n\t\t}\n\t\tif (this.props.onRequestOpen) {\n\t\t\tthis.props.onRequestOpen();\n\t\t}\n\t\tthis.setState({ isOpen: true });\n\t};\n\n\thandleChange = (event) => {\n\t\tconst target = event.target || event.currentTarget;\n\t\tthis.setState({ searchTerm: normalizeSearchTerm(target.value) });\n\t\tif (this.props.onChange) {\n\t\t\tthis.props.onChange(target.value);\n\t\t}\n\t};\n\n\thandleKeyDown = (event) => {\n\t\tif (event.keyCode) {\n\t\t\t// If user hits esc key or tab key, close menu\n\t\t\tif (event.keyCode === KEYS.ESCAPE) {\n\t\t\t\tthis.handleEscape(event);\n\t\t\t} else if (event.keyCode === KEYS.TAB) {\n\t\t\t\t// remove the focus on input, tab focus shoud move to next tabbale elemnt\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.handleClose();\n\t\t\t\t}, 200);\n\t\t\t\tthis.handleBlur(event);\n\t\t\t} else {\n\t\t\t\tthis.handleClick();\n\t\t\t}\n\n\t\t\t// If user hits down key, advance aria activedescendant to next item\n\t\t\tif (event.keyCode === KEYS.DOWN) {\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\tif (this.state.focusIndex === null) {\n\t\t\t\t\tthis.setFirstIndex();\n\t\t\t\t} else {\n\t\t\t\t\tthis.increaseIndex();\n\t\t\t\t}\n\t\t\t} else if (event.keyCode === KEYS.UP) {\n\t\t\t\t// If user hits up key, advance aria activedescendant to previous item\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\tconst numFocusable = this.getNumFocusableItems();\n\t\t\t\tif (this.state.focusIndex === null) {\n\t\t\t\t\tthis.setState({ focusIndex: numFocusable });\n\t\t\t\t} else {\n\t\t\t\t\tthis.decreaseIndex();\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tevent.keyCode === KEYS.ENTER &&\n\t\t\t\tthis.state.focusIndex !== null\n\t\t\t) {\n\t\t\t\t// If user hits enter, select current activedescendant item\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\t// If the focus is on the first fixed Action Item in Menu, click it\n\t\t\t\tif (this.headerComponent && this.state.focusIndex === 0) {\n\t\t\t\t\tthis.headerComponent.handleClick();\n\t\t\t\t} else if (\n\t\t\t\t\tthis.footerComponent &&\n\t\t\t\t\tthis.state.focusIndex === this.state.listLength + 1\n\t\t\t\t) {\n\t\t\t\t\t// If the focus is on the last fixed Action Item in Menu, click it\n\t\t\t\t\tthis.footerComponent.handleClick();\n\t\t\t\t} else {\n\t\t\t\t\t// If not, then select menu item\n\t\t\t\t\tthis.selectItem(this.state.currentFocus);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\thandlePillKeyDown = (event) => {\n\t\tif (event.keyCode) {\n\t\t\tif (event.keyCode === KEYS.DELETE || event.keyCode === KEYS.BACKSPACE) {\n\t\t\t\tEventUtil.trapImmediate(event);\n\t\t\t\tthis.handleDeleteSelected();\n\t\t\t}\n\t\t}\n\t};\n\n\tinputRefId = () => `${this.props.label}Lookup`;\n\n\tfocusInput = () => {\n\t\tthis.focusOnRender = true;\n\t};\n\n\tisSelected = () => {\n\t\tconst hasSelection =\n\t\t\t!isNaN(parseInt(this.state.selectedIndex, 10)) &&\n\t\t\tthis.state.selectedIndex >= 0;\n\t\treturn hasSelection;\n\t};\n\n\tmodifyItems = (itemsToModify) => {\n\t\tconst items = itemsToModify.map((item, index) => ({\n\t\t\tid: `item-${index}`,\n\t\t\tlabel: item.label,\n\t\t\tdata: item,\n\t\t}));\n\n\t\tthis.setState({ items });\n\t};\n\n\t// =================================================\n\t// Rendering Things\n\trenderMenuContent = () => (\n\t\t<Menu\n\t\t\tref={(menu) => {\n\t\t\t\tthis.menuComponent = menu;\n\t\t\t}}\n\t\t\temptyMessage={this.props.emptyMessage}\n\t\t\tfilterWith={this.props.filterWith}\n\t\t\tfocusIndex={this.state.focusIndex}\n\t\t\tfooter={this.props.footerRenderer ? this.getFooter() : null}\n\t\t\tgetListLength={this.getListLength}\n\t\t\theader={this.props.headerRenderer ? this.getHeader() : null}\n\t\t\ticonCategory={this.props.iconCategory}\n\t\t\ticonInverse={this.props.iconInverse}\n\t\t\ticonName={this.props.iconName}\n\t\t\titems={this.state.items}\n\t\t\tlabel={this.props.label}\n\t\t\tlistItemLabelRenderer={this.props.listItemLabelRenderer}\n\t\t\tlistLength={this.state.listLength}\n\t\t\tonSelect={this.selectItem}\n\t\t\tsearchTerm={this.state.searchTerm}\n\t\t\tsectionDividerRenderer={this.props.sectionDividerRenderer}\n\t\t\tsetFocus={this.setFocus}\n\t\t/>\n\t);\n\n\trenderInlineMenu = () =>\n\t\tthis.getIsOpen() ? (\n\t\t\t<div\n\t\t\t\tclassName=\"ignore-react-onclickoutside slds-lookup__menu\"\n\t\t\t\trole=\"listbox\"\n\t\t\t>\n\t\t\t\t{this.renderMenuContent()}\n\t\t\t</div>\n\t\t) : null;\n\n\trenderSeparateMenu = () => {\n\t\t// FOR BACKWARDS COMPATIBILITY\n\t\tconst menuPosition = this.props.isInline\n\t\t\t? 'relative'\n\t\t\t: this.props.menuPosition; // eslint-disable-line react/prop-types\n\t\treturn this.getIsOpen() ? (\n\t\t\t<Dialog\n\t\t\t\talign=\"bottom\"\n\t\t\t\tclassName=\"slds-lookup__menu slds-show\"\n\t\t\t\tcloseOnTabKey\n\t\t\t\tcontentsClassName=\"slds-lookup__menu slds-show\"\n\t\t\t\tcontext={this.context}\n\t\t\t\tinheritWidthOf=\"target\"\n\t\t\t\tonClose={this.handleCancel}\n\t\t\t\thasStaticAlignement={!this.props.flippable}\n\t\t\t\tconstrainToScrollParent={this.props.constrainToScrollParent}\n\t\t\t\tonRequestTargetElement={() => this.input}\n\t\t\t\tposition={menuPosition}\n\t\t\t>\n\t\t\t\t{this.renderMenuContent()}\n\t\t\t</Dialog>\n\t\t) : null;\n\t};\n\n\trenderInput = () => (\n\t\t<Input\n\t\t\taria-activedescendant={\n\t\t\t\tthis.state.currentFocus ? this.state.currentFocus : ''\n\t\t\t}\n\t\t\taria-autocomplete=\"list\"\n\t\t\taria-describedby={this.props.describedById}\n\t\t\taria-expanded={!!this.getIsOpen()}\n\t\t\tassistiveText={this.props.assistiveText}\n\t\t\tclassName=\"slds-lookup__search-input\"\n\t\t\tdisabled={this.props.disabled}\n\t\t\ticonRight={\n\t\t\t\t<InputIcon\n\t\t\t\t\tassistiveText={{ icon: 'Search' }}\n\t\t\t\t\tcategory=\"utility\"\n\t\t\t\t\tname=\"search\"\n\t\t\t\t/>\n\t\t\t}\n\t\t\tid={this.inputRefId()}\n\t\t\tonBlur={this.handleBlur}\n\t\t\tonChange={this.handleChange}\n\t\t\tonClick={this.handleClick}\n\t\t\tonFocus={this.handleFocus}\n\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\tinputRef={(component) => {\n\t\t\t\tthis.input = component;\n\t\t\t\tif (this.focusOnRender) {\n\t\t\t\t\tthis.input.focus();\n\t\t\t\t\tthis.focusOnRender = false;\n\t\t\t\t}\n\t\t\t}}\n\t\t\tplaceholder={this.props.placeholder}\n\t\t\trole=\"combobox\"\n\t\t\ttype=\"text\"\n\t\t\tvalue={this.state.searchTerm}\n\t\t/>\n\t);\n\n\trenderSelectedItem = () => {\n\t\tconst selectedItem = this.props.options[this.state.selectedIndex].label;\n\t\tconst renderIcon = this.props.iconName ? (\n\t\t\t<Icon\n\t\t\t\tcategory={this.props.iconCategory}\n\t\t\t\tclassName=\"slds-icon slds-pill__icon\"\n\t\t\t\tinverse={this.props.iconInverse}\n\t\t\t\tname={this.props.iconName}\n\t\t\t/>\n\t\t) : null;\n\t\tconst labelClassName = this.props.iconName\n\t\t\t? 'slds-pill__label'\n\t\t\t: 'slds-pill__label slds-m-left_x-small';\n\n\t\t// i18n\n\t\treturn (\n\t\t\t<div className=\"slds-pill__container\">\n\t\t\t\t<a\n\t\t\t\t\thref=\"#\"\n\t\t\t\t\tclassName=\"slds-pill\"\n\t\t\t\t\tref={(pill) => {\n\t\t\t\t\t\tthis.pills[this.state.selectedIndex] = pill;\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={(event) => event.preventDefault()}\n\t\t\t\t\tonKeyDown={this.handlePillKeyDown}\n\t\t\t\t>\n\t\t\t\t\t{renderIcon}\n\t\t\t\t\t<span className={labelClassName}>{selectedItem}</span>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tassistiveText={{ icon: 'Press delete to remove' }}\n\t\t\t\t\t\tclassName=\"slds-pill__remove slds-button_icon-bare\"\n\t\t\t\t\t\ticonCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"close\"\n\t\t\t\t\t\tonClick={this.handleDeleteSelected}\n\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\tvariant=\"icon\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t);\n\t};\n\n\trenderLabel = () => {\n\t\tlet inputLabel;\n\t\tconst required = this.props.required ? (\n\t\t\t// eslint-disable-next-line react/jsx-curly-brace-presence\n\t\t\t<span className=\"slds-required\">{'*'}</span>\n\t\t) : null;\n\t\tif (this.isSelected()) {\n\t\t\t// inline style override\n\t\t\tinputLabel = (\n\t\t\t\t<span className=\"slds-form-element__label\" style={{ width: '100%' }}>\n\t\t\t\t\t{required}\n\t\t\t\t\t{this.props.label}\n\t\t\t\t</span>\n\t\t\t);\n\t\t} else {\n\t\t\tinputLabel = (\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"slds-form-element__label\"\n\t\t\t\t\thtmlFor={this.inputRefId()}\n\t\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\t>\n\t\t\t\t\t{required}\n\t\t\t\t\t{this.props.label}\n\t\t\t\t</label>\n\t\t\t);\n\t\t}\n\t\treturn inputLabel;\n\t};\n\n\trender() {\n\t\tlet isInline;\n\t\t/* eslint-disable react/prop-types */\n\t\tif (this.props.isInline) {\n\t\t\tisInline = true;\n\t\t} else if (this.props.modal !== undefined) {\n\t\t\tisInline = !this.props.modal;\n\t\t}\n\t\t/* eslint-enable react/prop-types */\n\n\t\tconst formElementControlClasses = {\n\t\t\t'slds-form-element__control': true,\n\t\t\t[`slds-input-has-icon slds-input-has-icon_${this.props.iconPosition}`]: !this.isSelected(),\n\t\t};\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={this.getClassName()}\n\t\t\t\tdata-select=\"single\"\n\t\t\t\tdata-scope=\"single\"\n\t\t\t\tonScroll={this.props.onScroll}\n\t\t\t>\n\t\t\t\t{this.props.label ? this.renderLabel() : null}\n\t\t\t\t<div className={classNames(formElementControlClasses)}>\n\t\t\t\t\t{this.isSelected() ? this.renderSelectedItem() : null}\n\t\t\t\t\t{!this.isSelected() ? this.renderInput() : null}\n\t\t\t\t</div>\n\t\t\t\t{isInline ? this.renderInlineMenu() : this.renderSeparateMenu()}\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nLookup.contextType = IconSettingsContext;\nexport default Lookup;\n"]},"metadata":{},"sourceType":"module"}