{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-disable react/sort-comp */\n\n/* eslint-disable prefer-destructuring */\n\n/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Item from './item';\n/* eslint-disable react/no-did-update-set-state */\n\nvar displayName = 'Lookup-Menu';\nvar propTypes = {\n  boldRegex: PropTypes.instanceOf(RegExp),\n  emptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  filterWith: PropTypes.func,\n  focusIndex: PropTypes.number,\n  getListLength: PropTypes.func,\n  iconCategory: PropTypes.string,\n  items: PropTypes.array,\n  label: PropTypes.string,\n  listLength: PropTypes.number,\n  searchTerm: PropTypes.string,\n  setFocus: PropTypes.func\n};\nvar defaultProps = {\n  emptyMessage: 'No matches found.'\n};\n\nvar Menu = /*#__PURE__*/function (_React$Component) {\n  _inherits(Menu, _React$Component);\n\n  var _super = _createSuper(Menu);\n\n  function Menu(props) {\n    var _this;\n\n    _classCallCheck(this, Menu);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"handleItemFocus\", function (itemIndex, itemHeight) {\n      if (_this.listRef) {\n        _this.listRef.scrollTop = itemIndex * itemHeight;\n      }\n    });\n\n    _this.state = {\n      filteredItems: _this.filteredItems()\n    };\n    return _this;\n  } // Set filtered list length in parent to determine active indexes for aria-activedescendent\n\n\n  _createClass(Menu, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // make an array of the children of the list but only count the actual items (but include section dividers)\n      var childFilter = function childFilter(child) {\n        return child.className.indexOf('js-slds-lookup__item') > -1 || child.className.indexOf('slds-lookup__divider') > -1;\n      };\n\n      var list = [].slice.call(this.listRef.children).filter(childFilter).length;\n      this.props.getListLength(list);\n\n      if (prevProps.items !== this.props.items || prevProps.filter !== this.props.filter || prevProps.searchTerm !== this.props.searchTerm) {\n        // eslint-disable-next-line class-methods-use-this\n        this.setState({\n          filteredItems: this.filteredItems()\n        });\n      }\n    }\n  }, {\n    key: \"getFilteredItemForIndex\",\n    value: function getFilteredItemForIndex(i) {\n      if (i > -1 && this.state.filteredItems && i < this.state.filteredItems.length) {\n        return this.state.filteredItems[i];\n      }\n\n      return null;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(item) {\n      return this.props.filterWith(this.props.searchTerm, item);\n    } // eslint-disable-next-line class-methods-use-this\n\n  }, {\n    key: \"filterEmptySections\",\n    value: function filterEmptySections(items) {\n      var result = [];\n      items.forEach(function (item, index) {\n        if (item && item.data && item.data.type === 'section') {\n          if (index + 1 < items.length) {\n            var nextItem = items[index + 1];\n\n            if (nextItem.data && nextItem.data.type !== 'section') {\n              // eslint-disable-next-line fp/no-mutating-methods\n              result.push(item);\n            }\n          }\n        } else {\n          // eslint-disable-next-line fp/no-mutating-methods\n          result.push(item);\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"filteredItems\",\n    value: function filteredItems() {\n      return this.filterEmptySections(this.props.items.filter(this.filter, this));\n    } // Scroll menu up/down when using mouse keys\n\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      if (this.state.filteredItems.length === 0) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          className: \"slds-lookup__message\",\n          \"aria-live\": \"polite\"\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"slds-m-left_x-large slds-p-vertical_medium\"\n        }, this.props.emptyMessage));\n      }\n\n      return this.renderItems();\n    }\n  }, {\n    key: \"renderFooter\",\n    value: function renderFooter() {\n      return this.props.footer;\n    }\n  }, {\n    key: \"renderHeader\",\n    value: function renderHeader() {\n      return this.props.header;\n    }\n  }, {\n    key: \"renderItems\",\n    value: function renderItems() {\n      var _this2 = this;\n\n      var focusIndex = this.props.focusIndex;\n      return this.state.filteredItems.map(function (component, i) {\n        // isActive means it is aria-activedescendant\n        var id = component.id;\n        var isActive = false;\n\n        if (_this2.props.header) {\n          isActive = focusIndex === i + 1;\n        } else {\n          isActive = focusIndex === i;\n        }\n\n        if (component.data.type === 'section') {\n          if (_this2.props.sectionDividerRenderer) {\n            var SectionDivider = _this2.props.sectionDividerRenderer;\n            return /*#__PURE__*/React.createElement(SectionDivider, _extends({\n              data: component.data,\n              key: \"section_header_\".concat(id)\n            }, _this2.props));\n          }\n        }\n\n        return /*#__PURE__*/React.createElement(Item, {\n          boldRegex: _this2.props.boldRegex,\n          data: component.data,\n          handleItemFocus: _this2.handleItemFocus,\n          iconCategory: _this2.props.iconCategory,\n          iconInverse: _this2.props.iconInverse,\n          iconName: _this2.props.iconName,\n          id: id,\n          index: i,\n          isActive: isActive,\n          key: id,\n          listItemLabelRenderer: _this2.props.listItemLabelRenderer,\n          onSelect: _this2.props.onSelect,\n          searchTerm: _this2.props.searchTerm,\n          setFocus: _this2.props.setFocus\n        }, component);\n      });\n    }\n  }, {\n    key: \"renderSectionDivider\",\n    value: function renderSectionDivider() {\n      return this.props.sectionDivider;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(\"section\", {\n        id: \"menuContainer\",\n        className: \"ignore-react-onclickoutside\"\n      }, this.renderHeader(), /*#__PURE__*/React.createElement(\"ul\", {\n        id: \"list\",\n        className: \"slds-lookup__list\",\n        role: \"presentation\",\n        ref: function ref(list) {\n          if (list) {\n            _this3.listRef = list;\n          }\n        }\n      }, this.renderContent()), this.renderFooter());\n    }\n  }]);\n\n  return Menu;\n}(React.Component);\n\nMenu.displayName = displayName;\nMenu.propTypes = propTypes;\nMenu.defaultProps = defaultProps;\nexport default Menu;","map":{"version":3,"sources":["../../../../.tmp-es/components/lookup/private/menu.jsx"],"names":["displayName","propTypes","boldRegex","PropTypes","emptyMessage","filterWith","focusIndex","getListLength","iconCategory","items","label","listLength","searchTerm","setFocus","func","defaultProps","Menu","React","Component","filteredItems","prevProps","childFilter","child","list","i","item","result","index","nextItem","itemIndex","id","component","isActive","SectionDivider"],"mappings":"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","sourcesContent":["/* eslint-disable react/sort-comp */\n/* eslint-disable prefer-destructuring */\n/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved */\n/* Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Item from './item';\n\n/* eslint-disable react/no-did-update-set-state */\n\nconst displayName = 'Lookup-Menu';\nconst propTypes = {\n\tboldRegex: PropTypes.instanceOf(RegExp),\n\temptyMessage: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n\tfilterWith: PropTypes.func,\n\tfocusIndex: PropTypes.number,\n\tgetListLength: PropTypes.func,\n\ticonCategory: PropTypes.string,\n\titems: PropTypes.array,\n\tlabel: PropTypes.string,\n\tlistLength: PropTypes.number,\n\tsearchTerm: PropTypes.string,\n\tsetFocus: PropTypes.func,\n};\nconst defaultProps = {\n\temptyMessage: 'No matches found.',\n};\nclass Menu extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { filteredItems: this.filteredItems() };\n\t}\n\n\t// Set filtered list length in parent to determine active indexes for aria-activedescendent\n\tcomponentDidUpdate(prevProps) {\n\t\t// make an array of the children of the list but only count the actual items (but include section dividers)\n\t\tconst childFilter = (child) =>\n\t\t\tchild.className.indexOf('js-slds-lookup__item') > -1 ||\n\t\t\tchild.className.indexOf('slds-lookup__divider') > -1;\n\t\tconst list = [].slice.call(this.listRef.children).filter(childFilter)\n\t\t\t.length;\n\t\tthis.props.getListLength(list);\n\t\tif (\n\t\t\tprevProps.items !== this.props.items ||\n\t\t\tprevProps.filter !== this.props.filter ||\n\t\t\tprevProps.searchTerm !== this.props.searchTerm\n\t\t) {\n\t\t\t// eslint-disable-next-line class-methods-use-this\n\t\t\tthis.setState({\n\t\t\t\tfilteredItems: this.filteredItems(),\n\t\t\t});\n\t\t}\n\t}\n\n\tgetFilteredItemForIndex(i) {\n\t\tif (\n\t\t\ti > -1 &&\n\t\t\tthis.state.filteredItems &&\n\t\t\ti < this.state.filteredItems.length\n\t\t) {\n\t\t\treturn this.state.filteredItems[i];\n\t\t}\n\t\treturn null;\n\t}\n\n\tfilter(item) {\n\t\treturn this.props.filterWith(this.props.searchTerm, item);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tfilterEmptySections(items) {\n\t\tconst result = [];\n\t\titems.forEach((item, index) => {\n\t\t\tif (item && item.data && item.data.type === 'section') {\n\t\t\t\tif (index + 1 < items.length) {\n\t\t\t\t\tconst nextItem = items[index + 1];\n\t\t\t\t\tif (nextItem.data && nextItem.data.type !== 'section') {\n\t\t\t\t\t\t// eslint-disable-next-line fp/no-mutating-methods\n\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line fp/no-mutating-methods\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tfilteredItems() {\n\t\treturn this.filterEmptySections(this.props.items.filter(this.filter, this));\n\t}\n\n\t// Scroll menu up/down when using mouse keys\n\thandleItemFocus = (itemIndex, itemHeight) => {\n\t\tif (this.listRef) {\n\t\t\tthis.listRef.scrollTop = itemIndex * itemHeight;\n\t\t}\n\t};\n\n\trenderContent() {\n\t\tif (this.state.filteredItems.length === 0) {\n\t\t\treturn (\n\t\t\t\t<li className=\"slds-lookup__message\" aria-live=\"polite\">\n\t\t\t\t\t<span className=\"slds-m-left_x-large slds-p-vertical_medium\">\n\t\t\t\t\t\t{this.props.emptyMessage}\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t);\n\t\t}\n\n\t\treturn this.renderItems();\n\t}\n\n\trenderFooter() {\n\t\treturn this.props.footer;\n\t}\n\n\trenderHeader() {\n\t\treturn this.props.header;\n\t}\n\n\trenderItems() {\n\t\tconst focusIndex = this.props.focusIndex;\n\t\treturn this.state.filteredItems.map((component, i) => {\n\t\t\t// isActive means it is aria-activedescendant\n\t\t\tconst id = component.id;\n\t\t\tlet isActive = false;\n\t\t\tif (this.props.header) {\n\t\t\t\tisActive = focusIndex === i + 1;\n\t\t\t} else {\n\t\t\t\tisActive = focusIndex === i;\n\t\t\t}\n\t\t\tif (component.data.type === 'section') {\n\t\t\t\tif (this.props.sectionDividerRenderer) {\n\t\t\t\t\tconst SectionDivider = this.props.sectionDividerRenderer;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SectionDivider\n\t\t\t\t\t\t\tdata={component.data}\n\t\t\t\t\t\t\tkey={`section_header_${id}`}\n\t\t\t\t\t\t\t{...this.props}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Item\n\t\t\t\t\tboldRegex={this.props.boldRegex}\n\t\t\t\t\tdata={component.data}\n\t\t\t\t\thandleItemFocus={this.handleItemFocus}\n\t\t\t\t\ticonCategory={this.props.iconCategory}\n\t\t\t\t\ticonInverse={this.props.iconInverse}\n\t\t\t\t\ticonName={this.props.iconName}\n\t\t\t\t\tid={id}\n\t\t\t\t\tindex={i}\n\t\t\t\t\tisActive={isActive}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tlistItemLabelRenderer={this.props.listItemLabelRenderer}\n\t\t\t\t\tonSelect={this.props.onSelect}\n\t\t\t\t\tsearchTerm={this.props.searchTerm}\n\t\t\t\t\tsetFocus={this.props.setFocus}\n\t\t\t\t>\n\t\t\t\t\t{component}\n\t\t\t\t</Item>\n\t\t\t);\n\t\t});\n\t}\n\n\trenderSectionDivider() {\n\t\treturn this.props.sectionDivider;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<section id=\"menuContainer\" className=\"ignore-react-onclickoutside\">\n\t\t\t\t{this.renderHeader()}\n\t\t\t\t<ul\n\t\t\t\t\tid=\"list\"\n\t\t\t\t\tclassName=\"slds-lookup__list\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t\tref={(list) => {\n\t\t\t\t\t\tif (list) {\n\t\t\t\t\t\t\tthis.listRef = list;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.renderContent()}\n\t\t\t\t</ul>\n\t\t\t\t{this.renderFooter()}\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nMenu.displayName = displayName;\nMenu.propTypes = propTypes;\nMenu.defaultProps = defaultProps;\n\nexport default Menu;\n"]},"metadata":{},"sourceType":"module"}